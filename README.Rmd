---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# `dbap`

<!-- badges: start -->
<!-- badges: end -->

The goal of `dbap` is to demonstrate how to test a shiny application package using [`testthat`](https://testthat.r-lib.org/), [`shiny::testServer()`](https://search.r-project.org/CRAN/refmans/shiny/html/testServer.html), and RStudio's debugger. 

## Installation

The examples for this package are contained in the vignette, `"debugging-test-server"`.

## Utility function tests 

The results for the utility function tests are below: 


```{r}
#| eval: false
#| echo: true
source("tests/testthat/helpers.R")
testthat::test_file("tests/testthat/test-get_col_types.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 16 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-check_binary_vec.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 25 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-check_facet_vec.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 16 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-make_binary_vec.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 5 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-make_facet_vec.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 7 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-pull_numeric_cols.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 1 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-pull_binary_cols.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 1 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-pull_facet_cols.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 1 ]
```

```{r}
#| eval: false
#| echo: true
testthat::test_file("tests/testthat/test-pull_cat_cols.R")
```
```
[ FAIL 0 | WARN 0 | SKIP 0 | PASS 1 ]
```

# Shiny server tests 

Check the shiny `testServer()` tests for the modules in `tests/testthat/`

```{r}
#| eval: true
#| echo: false
fs::dir_tree("tests/testthat/", regexp = "mod")
```

```{r}
#| eval: false
#| echo: true
# run module function tests -----------------------------------------------
testthat::test_file("tests/testthat/test-mod_pkg_server.R")
testthat::test_file("tests/testthat/test-mod_ds_server.R")
testthat::test_file("tests/testthat/test-mod_cols_server.R")
testthat::test_file("tests/testthat/test-mod_plot_server.R")
```


